<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Run a full AutoML pipeline — run_automl_pipeline • gentleman</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Run a full AutoML pipeline — run_automl_pipeline"><meta property="og:description" content="This function runs a full AutoML pipeline, starting from a data.frame
split into training and test sets to adding predictions from an AutoML model
to the test set and possibly reporting variable importances."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gentleman</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/patc3-phd/gentleman/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run a full AutoML pipeline</h1>
    <small class="dont-index">Source: <a href="https://github.com/patc3-phd/gentleman/blob/HEAD/R/ml.R" class="external-link"><code>R/ml.R</code></a></small>
    <div class="hidden name"><code>run_automl_pipeline.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function runs a full AutoML pipeline, starting from a <code>data.frame</code>
split into training and test sets to adding predictions from an AutoML model
to the test set and possibly reporting variable importances.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_automl_pipeline</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">config</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  prop_train <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  scale_numeric_features <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add_confidence_level <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot_and_print_variable_importances <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nthreads <span class="op">=</span> <span class="st">"half"</span>,</span>
<span>  shutdown_h2o <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df</dt>
<dd><p>data.frame</p></dd>


<dt>target</dt>
<dd><p>(character) name of target variable</p></dd>


<dt>config</dt>
<dd><p>Configuration object (from calling <code><a href="get_automl_config.html">get_automl_config()</a></code>)</p></dd>


<dt>...</dt>
<dd><p>additional arguments passed to <code><a href="get_automl_model.html">get_automl_model()</a></code></p></dd>


<dt>prop_train</dt>
<dd><p>proportion of rows to be allocated to training</p></dd>


<dt>scale_numeric_features</dt>
<dd><p>(logical) whether to scale numeric features
(see <code><a href="scale_numeric_features_in_train_and_test.html">scale_numeric_features_in_train_and_test()</a></code>)</p></dd>


<dt>add_confidence_level</dt>
<dd><p>(logical) whether to add confidence levels
alongside predictions in the test set (default <code>FALSE</code>)</p></dd>


<dt>plot_and_print_variable_importances</dt>
<dd><p>(logical) whether to plot and print
variable importances if they are available</p></dd>


<dt>nthreads</dt>
<dd><p>(character) how many threads (cores) to dedicate to the
H2O cluster ("half", "minus1", or "all"; see <code><a href="init_h2o.html">init_h2o()</a></code>)</p></dd>


<dt>shutdown_h2o</dt>
<dd><p>(logical) whether to shut down cluster at the end of the pipeline
(default <code>FALSE</code>)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>list with elements:</p><dl><dt>tt</dt>
<dd><p>train-test split constructed from <code>df</code>, with predictions and
possibly confidence levels added to the test set</p></dd>

<dt>automl</dt>
<dd><p>H2O AutoML model</p></dd>


</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>df</code> data.frame is first prepared by removing non-ASCII characters,
casting all character variables to factors (if any), and removing blank factor
levels from factors. Then it is split into training and test sets, and if requested,
numeric features are scaled based on sample statistics in the training set. Next,
a local H2O cluster is launched, the train and test sets are uploaded to the cluster,
and an AutoML model is requested using parameters specified in the configuration
object. Predictions are added to the test set (with or without confidence levels),
and variable importances may be plotted and reported. Finally, if requested,
the H2O cluster is shut down.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="ttsplit.html">ttsplit()</a></code>,
<code><a href="scale_numeric_features_in_train_and_test.html">scale_numeric_features_in_train_and_test()</a></code>,
<code><a href="get_automl_model.html">get_automl_model()</a></code>,
<code><a href="add_predictions_from_automl.html">add_predictions_from_automl()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_automl_config.html">get_automl_config</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pip</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">|&gt;</span> <span class="fu">run_automl_pipeline</span><span class="op">(</span>target<span class="op">=</span><span class="st">"y1"</span>, <span class="va">config</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Coulombe.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

